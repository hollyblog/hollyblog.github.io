---
title: "Java 基础语法"
date: 2021-01-08T20:18:05+08:00
draft: false
description: "Java 基础语法：基本数据类型、变量类型、运算符、输入输出、表达式和语句、类型转换。"
tags: ["Java", "基础语法"]
categories: ["Java-base"]
---
Java 基础语法：基本数据类型、变量类型、运算符、输入输出、表达式和语句、类型转换。

## Java 基本数据类型
> java是一种强类型语言，每个变量都必须先声明后使用，且变量的类型在编译时就已经确定，不能改变。java提供了8种基本数据类型，分别是：byte、short、int、long、float、double、boolean、char。它们是java语言内置的数据类型，不是对象，直接存储在栈内存中，具有高效的存储和访问特性。
> 
### 基本数据类型的特点
 - 直接存储数据值，存储在栈内存中，访问速度快。
 - 占用内存空间大小不同，byte占用1个字节，short占用2个字节，int占用4个字节，long占用8个字节，float占用4个字节，double占用8个字节，boolean占用1个字节，char占用2个字节。都有明确取值范围。
- 数值类型可以进行算术运算、关系运算、逻辑运算等。
- 字符类型可以表示单个字符，用单引号括起来，例如：'a'、'1'、'中'等。使用Unicode编码表示字符，每个字符占用2个字节。可以使用转义字符表示一些特殊字符，例如：'\n'表示换行符，'\t'表示制表符等。可以进行算术运算，将字符转换为对应的整数值。
- 布尔类型只有两个值：true和false，用于表示逻辑判断结果。不能与其他数据类型进行转换，在jvm中实际占用的空间不止1位。
- 都有默认值，不需要使用new关键字创建。
- 金融计算建议使用BigDecimal类，避免使用float和double类型。

### 使用建议
- 整数类型建议使用int类型，除非有特殊需求，例如需要表示较大的整数或需要与其他语言进行交互。
- 浮点数类型建议使用double类型，除非有特殊需求，例如需要表示较大的浮点数或需要与其他语言进行交互。
- 字符类型建议使用char类型，字符串类型建议使用String类，除非有特殊需求，例如需要表示较大的字符或需要与其他语言进行交互。
- 布尔类型建议使用boolean类型，不要用0和1表示，除非有特殊需求，例如需要表示较大的布尔值或需要与其他语言进行交互。
- 不要为了节省内存而盲目使用小类型
- 不要在不需要时使用long或者double类型，因为它们占用的内存空间较大，访问速度较慢。
- 不要忘记float和long都后缀 f和l，否则会被默认解释为int类型，导致编译错误。
- 不要混淆char和string类型，char表示单个字符，string表示字符串。

---

## Java 变量类型
> java变量类型分为三种：局部变量、实例变量和类变量。
> 
### 局部变量
- 局部变量是在方法、构造方法或语句块中定义的变量，它们只能在定义它们的方法、构造方法或语句块中访问。
- 局部变量在使用前必须先声明和初始化，否则会编译错误。
- 局部变量的生命周期从声明开始，到方法、构造方法或语句块结束。
- 局部变量存储在栈内存中，访问速度快。
### 实例变量
- 实例变量是在类中定义的变量，每个对象都有一个独立的实例变量副本，存储在堆内存中。
- 实例变量在对象创建时初始化创建，默认值为0或null，根据变量类型不同而不同。
- 实例变量可以在类的任何方法中访问，包括构造方法和普通方法。
- 实例变量的生命周期从对象创建开始，到对象销毁结束。
### 类变量
- 类变量是在类中使用static关键字声明的变量，所有对象共享同一个类变量副本，存储在方法区（元空间）内存中。
- 类变量在类加载时初始化，默认值为0或null，根据变量类型不同而不同。
- 类变量可以在类的任何方法中访问，可以通过类名直接访问（推荐），也可以通过对象名访问（不推荐）。包括静态方法和非静态方法。
- 类变量的生命周期从类加载开始，到类卸载结束。
  
---

## Java 内存分配示意
栈内存
- 存储局部变量、方法参数、返回地址等。
- 访问速度快，生命周期短暂。
  
堆内存
- 存储对象实例、数组等。
- 访问速度较慢，生命周期较长。

方法区（元空间）内存
- 存储类的结构信息、静态变量、常量池等。
- 访问速度较慢，生命周期较长。
---

## Java 运算符
> java提供了丰富的运算符，用于进行各种运算操作。主要包括算术运算符、关系运算符、逻辑运算符、位运算符、赋值运算符和其他运算符。
> 
### 算术运算符
- 用于进行基本的算术运算，包括加法、减法、乘法、除法和取余运算。
- 运算符优先级从高到低依次为：()、*、/、%、+、-。
- 注意：整数相除结果为整数，要得到浮点数结果，需要至少有一个操作数为浮点数。
- 注意：取余运算符%的结果与操作数的符号有关，例如：5%2=1，-5%2=-1，5%-2=1，-5%-2=-1。
### 关系运算符
- 用于比较两个值的大小关系，包括大于、小于、大于等于、小于等于。
- 关系运算符的结果为boolean类型，即true或false。
- 注意：关系运算符只能用于比较相同类型的操作数，否则会编译错误。
### 逻辑运算符
- 用于进行逻辑运算，包括与、或、非。
- 逻辑运算符的结果为boolean类型，即true或false。
- 注意：逻辑运算符的操作数只能为boolean类型，否则会编译错误。
- 注意：逻辑运算符的优先级低于关系运算符，高于位运算符。
### 位运算符
- 用于进行位运算，包括按位与、按位或、按位非、按位异或、左移、右移。
- 位运算符的操作数和结果都为整数类型，例如：int、long、byte、short。
- 位运算符的优先级低于算术运算符，高于赋值运算符。
- 注意：左移运算符<<将操作数的二进制位向左移动指定的位数，高位补0，低位丢弃。例如：5<<2=20，即00000101左移2位变为00010100，结果为20。
- 注意：右移运算符>>将操作数的二进制位向右移动指定的位数，高位补符号位（正数补0，负数补1），低位丢弃。例如：-5>>2=-2，即11111011右移2位变为11111110，结果为-2。
  
字符串比较注意：
> == 比较的是引用（内存地址），不是内容；equals()方法比较的是内容。使用compareTo()方法可以比较字符串的内容。字符串比较使用equals()方法，而不是==运算符。

短路求值机制
> 逻辑与（&&）：如果左操作数为false，右操作数不会被求值，直接返回false。
> 逻辑或（||）：如果左操作数为true，右操作数不会被求值，直接返回true。
> **可以提高程序性能，避免不必要的计算。**

## Java 输入和输出
Scanner方法详解
> Scanner类是java.util包中的一个类，用于从输入流中读取数据。常用于从控制台读取用户输入的数据。
- Scanner类的常用方法
  - next()：读取一个字符串，遇到空格、制表符或换行符结束。
  - nextInt()：读取一个整数，遇到空格、制表符或换行符结束。
  - nextDouble()：读取一个浮点数，遇到空格、制表符或换行符结束。
  - nextLine()：读取一行字符串，包括空格、制表符和换行符。
  - hasNext()：判断是否还有下一个输入项。
  - hasNextInt()：判断是否还有下一个整数输入项。
  - hasNextDouble()：判断是否还有下一个浮点数输入项。
  
> 使用nextInt()方法后，如果要使用nextLine()方法，需要在nextInt()方法后调用一次nextLine()方法，将换行符消耗掉。
> Scanner使用完毕之后，应该调用close()方法关闭Scanner对象，释放资源。
> 使用try-catch语句来处理Scanner类可能抛出的异常，例如：InputMismatchException、NoSuchElementException等。

## Java 类型转换
类型转换分类：
- 自动类型转换（隐式转换）：由编译器自动完成；（由小范围向大范围转换）
- 强制类型转换（显式转换）：需要程序员明确指定。（由大范围向小范围转换）
- 包装类转换：基本类型与包装类之间的转换（性能开销大）
- 字符串转换：字符串与其他类型之间的转换
  
> 由小到大：
> char-byte-short-int-long-float-double

- 由小到大的转换：可以存在精度丢失，例如：将int类型转换为float类型时，可能会丢失小数部分。
- 由大到小的转换：可能会数据溢出，例如：将long类型转换为int类型时，可能会丢失高位数据。



